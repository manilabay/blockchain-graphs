digraph corda {

  layout="circo";
  node [shape = circle];

  node_A -> node_B [label="AMQP/1.0 over TLS" color="green"];
  node_A -> node_C [color="green"];
  node_A -> node_D [color="green"];
  node_A -> node_E [color="green"];
  node_A -> node_F [color="green"];

  node_B -> node_A [color="green"];
  node_B -> node_C [color="green"];
  node_B -> node_D [color="green"];
  node_B -> node_E [color="green"];
  node_B -> node_F [color="green"];

  node_C -> node_A [color="green"];
  node_C -> node_B [color="green"];
  node_C -> node_D [color="green"];
  node_C -> node_E [color="green"];
  node_C -> node_F [color="green"];

  node_D -> node_A [color="green"];
  node_D -> node_B [color="green"];
  node_D -> node_C [color="green"];
  node_D -> node_E [color="green"];
  node_D -> node_F [color="green"];

  node_E -> node_A [color="green"];
  node_E -> node_B [color="green"];
  node_E -> node_C [color="green"];
  node_E -> node_D [color="green"];
  node_E -> node_F [color="green"];

  node_F -> node_A [color="green"];
  node_F -> node_B [color="green"];
  node_F -> node_C [color="green"];
  node_F -> node_D [color="green"];
  node_F -> node_E [color="green"];

  New_Node -> Doorman [label="Know-Your-Customer rules" color="green"];
  Doorman -> Permissioning_Service_PKI [label="If KYC ok Sign certificates" color="green"];
  Permissioning_Service_PKI -> New_Node [label="root-authority-signed TLS certificate" color="green"];

  rankdir=LR;
  subgraph components_by_node {

  layout="dot";
  node [shape = box];

    node_E -> JVM [label="has 1-1"];
    JVM -> smart_contract_X [label="execute"];
    JVM -> smart_contract_Y [label="execute"];
    node_A -> Contract_Account;
    #node_E -> External_Owned_Account;
    Contract_Account -> eth_balance_CA;
    Contract_Account -> smart_contract_X;
    Contract_Account -> smart_contract_Y;
    Contract_Account -> smart_contract_Z;
    External_Owned_Account -> eth_balance_EOA;
    External_Owned_Account -> node_E [label="eth transfer OR trigger contract code"];

    #Abstract objects

    developers -> DAO [label="build and deploy"];
    DAO -> CordaDapp_1;
    DAO -> CordaDapp_2 [label="has 1-n"];
    CordaDapp_1 -> smart_contract_X;
    CordaDapp_1 -> smart_contract_Y;
    CordaDapp_2 -> smart_contract_Z [label="has 1-n"];

    private_key_A -> External_Owned_Account [label="sign"];
    private_key_n -> External_Owned_Account [label="multi-signature"];



  }

}
